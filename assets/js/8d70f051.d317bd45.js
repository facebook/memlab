"use strict";(globalThis.webpackChunkmemlab_website=globalThis.webpackChunkmemlab_website||[]).push([[2886],{582(e,a,t){t.r(a),t.d(a,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>p});var n=t(8168),r=(t(6540),t(5680));const s={},l="Class: SnapshotResultReader",o={unversionedId:"api/api/src/classes/SnapshotResultReader",id:"api/api/src/classes/SnapshotResultReader",title:"Class: SnapshotResultReader",description:"Defined in34",source:"@site/docs/api/api/src/classes/SnapshotResultReader.md",sourceDirName:"api/api/src/classes",slug:"/api/api/src/classes/SnapshotResultReader",permalink:"/memlab/docs/api/api/src/classes/SnapshotResultReader",draft:!1,editUrl:"https://github.com/facebook/memlab/blob/main/website/docs/api/api/src/classes/SnapshotResultReader.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Class: BrowserInteractionResultReader",permalink:"/memlab/docs/api/api/src/classes/BrowserInteractionResultReader"},next:{title:"Enumeration: ConsoleMode",permalink:"/memlab/docs/api/api/src/enumerations/ConsoleMode"}},i={},p=[{value:"Extends",id:"extends",level:2},{value:"Methods",id:"methods",level:2},{value:"getConsoleBackupFile()",id:"getconsolebackupfile",level:3},{value:"Returns",id:"returns",level:4},{value:"Inherited from",id:"inherited-from",level:4},{value:"getInteractionSteps()",id:"getinteractionsteps",level:3},{value:"Returns",id:"returns-1",level:4},{value:"getRootDirectory()",id:"getrootdirectory",level:3},{value:"Returns",id:"returns-2",level:4},{value:"Inherited from",id:"inherited-from-1",level:4},{value:"getSnapshotFiles()",id:"getsnapshotfiles",level:3},{value:"Returns",id:"returns-3",level:4},{value:"fromSnapshots()",id:"fromsnapshots",level:3},{value:"Parameters",id:"parameters",level:4},{value:"baselineSnapshot",id:"baselinesnapshot",level:5},{value:"targetSnapshot",id:"targetsnapshot",level:5},{value:"finalSnapshot",id:"finalsnapshot",level:5},{value:"Returns",id:"returns-4",level:4}],u={toc:p};function d({components:e,...a}){return(0,r.yg)("wrapper",(0,n.A)({},u,a,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"class-snapshotresultreader"},"Class: SnapshotResultReader"),(0,r.yg)("p",null,"Defined in: ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/facebook/memlab/blob/47a71bef1d5ea6516a3ed09d69903940fd8a8ea0/packages/api/src/result-reader/SnapshotResultReader.ts#L34"},"api/src/result-reader/SnapshotResultReader.ts:34")),(0,r.yg)("p",null,"A utility entity to read all MemLab files generated from\nbaseline, target and final heap snapshots."),(0,r.yg)("p",null,"The most useful feature of this class is when you have\nthree separate snapshots (baseline, target, and final)\nthat are not taken from MemLab, but you still would\nlike to use the ",(0,r.yg)("inlineCode",{parentName:"p"},"findLeaks")," to detect memory leaks:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const {SnapshotResultReader, findLeaks} = require('@memlab/api');\n\n// baseline, target, and final are file paths of heap snapshot files\nconst reader = SnapshotResultReader.fromSnapshots(baseline, target, final);\nconst leaks = await findLeaks(reader);\n")),(0,r.yg)("h2",{id:"extends"},"Extends"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"default"))),(0,r.yg)("h2",{id:"methods"},"Methods"),(0,r.yg)("h3",{id:"getconsolebackupfile"},"getConsoleBackupFile()"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"getConsoleBackupFile"),"(): ",(0,r.yg)("inlineCode",{parentName:"p"},"string"))),(0,r.yg)("p",null,"Defined in: ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/facebook/memlab/blob/47a71bef1d5ea6516a3ed09d69903940fd8a8ea0/packages/api/src/result-reader/BaseResultReader.ts#L102"},"api/src/result-reader/BaseResultReader.ts:102")),(0,r.yg)("p",null,"This method gets the backup file of the console output."),(0,r.yg)("p",null,"The memlab CLI commands (e.g., ",(0,r.yg)("inlineCode",{parentName:"p"},"memlab find-leaks"),") outputs a\nnon-structured string representation for easy reading, while the\nAPIs (e.g., ",(0,r.yg)("code",null,(0,r.yg)("a",{parentName:"p",href:"/memlab/docs/api/api/src/functions/findLeaks"},"findLeaks")),") return structured leaks\nrepresentation that is handy for post-processing. If you need to\nobtain all the string output from the CLI in the current working directory,\nyou can read them from the CLI output backup file returned by this method."),(0,r.yg)("h4",{id:"returns"},"Returns"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"string")),(0,r.yg)("p",null,"the absolute path of the backup file"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Examples"),":")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const {takeSnapshots, findLeaks} = require('@memlab/api');\n\n(async function () {\n  const scenario = { url: () => 'https://www.npmjs.com'};\n  const result = await takeSnapshots({scenario});\n  const leaks = await findLeaks(result);\n\n  // get the console output backup file\n  const consoleBackupFile = result.getConsoleBackupFile();\n})();\n")),(0,r.yg)("h4",{id:"inherited-from"},"Inherited from"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"BaseResultReader.getConsoleBackupFile")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"getinteractionsteps"},"getInteractionSteps()"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"getInteractionSteps"),"(): ",(0,r.yg)("inlineCode",{parentName:"p"},"E2EStepInfo"),"[]")),(0,r.yg)("p",null,"Defined in: ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/facebook/memlab/blob/47a71bef1d5ea6516a3ed09d69903940fd8a8ea0/packages/api/src/result-reader/SnapshotResultReader.ts#L161"},"api/src/result-reader/SnapshotResultReader.ts:161")),(0,r.yg)("p",null,"browser interaction step sequence"),(0,r.yg)("h4",{id:"returns-1"},"Returns"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"E2EStepInfo"),"[]"),(0,r.yg)("p",null,"an array of browser interaction step information"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Examples"),":")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const {SnapshotResultReader} = require('@memlab/api');\n\n// baseline, target, and final are file paths of heap snapshot files\nconst reader = SnapshotResultReader.fromSnapshots(baseline, target, final);\nconst paths = reader.getInteractionSteps();\n")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"getrootdirectory"},"getRootDirectory()"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"getRootDirectory"),"(): ",(0,r.yg)("inlineCode",{parentName:"p"},"string"))),(0,r.yg)("p",null,"Defined in: ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/facebook/memlab/blob/47a71bef1d5ea6516a3ed09d69903940fd8a8ea0/packages/api/src/result-reader/BaseResultReader.ts#L72"},"api/src/result-reader/BaseResultReader.ts:72")),(0,r.yg)("p",null,"get the directory where the data and generated files of\nthe memlab run were stored"),(0,r.yg)("h4",{id:"returns-2"},"Returns"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"string")),(0,r.yg)("p",null,"absolute path of the directory"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Examples"),":")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const {takeSnapshots} = require('@memlab/api');\n\n(async function () {\n  const scenario = { url: () => 'https://www.npmjs.com'};\n  const result = await takeSnapshots({scenario});\n\n  // get the directory that stores all the files\n  // generated from the takeSnapshots call\n  const dataDir = result.getRootDirectory();\n})();\n")),(0,r.yg)("h4",{id:"inherited-from-1"},"Inherited from"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"BaseResultReader.getRootDirectory")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"getsnapshotfiles"},"getSnapshotFiles()"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"getSnapshotFiles"),"(): ",(0,r.yg)("inlineCode",{parentName:"p"},"string"),"[]")),(0,r.yg)("p",null,"Defined in: ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/facebook/memlab/blob/47a71bef1d5ea6516a3ed09d69903940fd8a8ea0/packages/api/src/result-reader/SnapshotResultReader.ts#L134"},"api/src/result-reader/SnapshotResultReader.ts:134")),(0,r.yg)("p",null,"get all snapshot files related to this SnapshotResultReader"),(0,r.yg)("h4",{id:"returns-3"},"Returns"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"string"),"[]"),(0,r.yg)("p",null,"an array of snapshot file's absolute path"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Examples"),":")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const {SnapshotResultReader} = require('@memlab/api');\n\n// baseline, target, and final are file paths of heap snapshot files\nconst reader = SnapshotResultReader.fromSnapshots(baseline, target, final);\nconst paths = reader.getSnapshotFiles();\n")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"fromsnapshots"},"fromSnapshots()"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("inlineCode",{parentName:"p"},"static")," ",(0,r.yg)("strong",{parentName:"p"},"fromSnapshots"),"(",(0,r.yg)("inlineCode",{parentName:"p"},"baselineSnapshot"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"targetSnapshot"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"finalSnapshot"),"): ",(0,r.yg)("inlineCode",{parentName:"p"},"SnapshotResultReader"))),(0,r.yg)("p",null,"Defined in: ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/facebook/memlab/blob/47a71bef1d5ea6516a3ed09d69903940fd8a8ea0/packages/api/src/result-reader/SnapshotResultReader.ts#L101"},"api/src/result-reader/SnapshotResultReader.ts:101")),(0,r.yg)("p",null,"Build a result reader from baseline, target, and final heap snapshot files.\nThe three snapshot files do not have to be in the same directory."),(0,r.yg)("h4",{id:"parameters"},"Parameters"),(0,r.yg)("h5",{id:"baselinesnapshot"},"baselineSnapshot"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"string")),(0,r.yg)("p",null,"file path of the baseline heap snapshot"),(0,r.yg)("h5",{id:"targetsnapshot"},"targetSnapshot"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"string")),(0,r.yg)("p",null,"file path of the target heap snapshot"),(0,r.yg)("h5",{id:"finalsnapshot"},"finalSnapshot"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"string")),(0,r.yg)("p",null,"file path of the final heap snapshot"),(0,r.yg)("h4",{id:"returns-4"},"Returns"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"SnapshotResultReader")),(0,r.yg)("p",null,"the ResultReader instance"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Examples"),":")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"const {SnapshotResultReader, findLeaks} = require('@memlab/api');\n\n// baseline, target, and final are file paths of heap snapshot files\nconst reader = SnapshotResultReader.fromSnapshots(baseline, target, final);\nconst leaks = await findLeaks(reader);\n")))}d.isMDXComponent=!0},5680(e,a,t){t.d(a,{xA:()=>u,yg:()=>c});var n=t(6540);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach(function(a){r(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function o(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=n.createContext({}),p=function(e){var a=n.useContext(i),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},u=function(e){var a=p(e.components);return n.createElement(i.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},g=n.forwardRef(function(e,a){var t=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),g=p(t),c=r,h=g["".concat(i,".").concat(c)]||g[c]||d[c]||s;return t?n.createElement(h,l(l({ref:a},u),{},{components:t})):n.createElement(h,l({ref:a},u))});function c(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=t.length,l=new Array(s);l[0]=g;var o={};for(var i in a)hasOwnProperty.call(a,i)&&(o[i]=a[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<s;p++)l[p]=t[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}g.displayName="MDXCreateElement"}}]);