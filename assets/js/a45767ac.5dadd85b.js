"use strict";(globalThis.webpackChunkmemlab_website=globalThis.webpackChunkmemlab_website||[]).push([[4721],{4539(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>s,frontMatter:()=>o,metadata:()=>c,toc:()=>p});var a=n(8168),r=(n(6540),n(5680));const o={},i="Function: tagObject()",c={unversionedId:"api/core/src/functions/tagObject",id:"api/core/src/functions/tagObject",title:"Function: tagObject()",description:"tagObject\\(o, tag): T",source:"@site/docs/api/core/src/functions/tagObject.md",sourceDirName:"api/core/src/functions",slug:"/api/core/src/functions/tagObject",permalink:"/memlab/docs/api/core/src/functions/tagObject",draft:!1,editUrl:"https://github.com/facebook/memlab/blob/main/website/docs/api/core/src/functions/tagObject.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Function: dumpNodeHeapSnapshot()",permalink:"/memlab/docs/api/core/src/functions/dumpNodeHeapSnapshot"},next:{title:"Function: takeNodeMinimalHeap()",permalink:"/memlab/docs/api/core/src/functions/takeNodeMinimalHeap"}},l={},p=[{value:"Type Parameters",id:"type-parameters",level:2},{value:"T",id:"t",level:3},{value:"Parameters",id:"parameters",level:2},{value:"o",id:"o",level:3},{value:"tag",id:"tag",level:3},{value:"Returns",id:"returns",level:2}],m={toc:p};function s({components:e,...t}){return(0,r.yg)("wrapper",(0,a.A)({},m,t,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"function-tagobject"},"Function: tagObject()"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"tagObject"),"\\<",(0,r.yg)("inlineCode",{parentName:"p"},"T"),">","(",(0,r.yg)("inlineCode",{parentName:"p"},"o"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"tag"),"): ",(0,r.yg)("inlineCode",{parentName:"p"},"T"))),(0,r.yg)("p",null,"Defined in: ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/facebook/memlab/blob/ca9b0621bb05ee96eb3381f9c90b111131038452/packages/core/src/lib/NodeHeap.ts#L59"},"core/src/lib/NodeHeap.ts:59")),(0,r.yg)("p",null,"Tags a string marker to an object instance, which can later be checked by\nhasObjectWithTag. This API does not modify the object instance in\nany way (e.g., no additional or hidden properties added to the tagged\nobject)."),(0,r.yg)("h2",{id:"type-parameters"},"Type Parameters"),(0,r.yg)("h3",{id:"t"},"T"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"T")," ",(0,r.yg)("em",{parentName:"p"},"extends")," ",(0,r.yg)("inlineCode",{parentName:"p"},"object")),(0,r.yg)("h2",{id:"parameters"},"Parameters"),(0,r.yg)("h3",{id:"o"},"o"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"T")),(0,r.yg)("p",null,"specify the object instance you want to tag, you cannot tag a\n",(0,r.yg)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Glossary/Primitive"},"primitive"),"."),(0,r.yg)("h3",{id:"tag"},"tag"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"string")),(0,r.yg)("p",null,"marker name to tag on the object instance"),(0,r.yg)("h2",{id:"returns"},"Returns"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"T")),(0,r.yg)("p",null,"returns the tagged object instance (same reference as\nthe input argument ",(0,r.yg)("inlineCode",{parentName:"p"},"o"),")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Examples"),":")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"import type {IHeapSnapshot, AnyValue} from '@memlab/core';\nimport {config, takeNodeMinimalHeap, tagObject} from '@memlab/core';\n\ntest('memory test', async () => {\n  config.muteConsole = true;\n  const o1: AnyValue = {};\n  let o2: AnyValue = {};\n\n  // tag o1 with marker: \"memlab-mark-1\", does not modify o1 in any way\n  tagObject(o1, 'memlab-mark-1');\n  // tag o2 with marker: \"memlab-mark-2\", does not modify o2 in any way\n  tagObject(o2, 'memlab-mark-2');\n\n  o2 = null;\n\n  const heap: IHeapSnapshot = await takeNodeMinimalHeap();\n\n  // expect object with marker \"memlab-mark-1\" exists\n  expect(heap.hasObjectWithTag('memlab-mark-1')).toBe(true);\n\n  // expect object with marker \"memlab-mark-2\" can be GCed\n  expect(heap.hasObjectWithTag('memlab-mark-2')).toBe(false);\n\n}, 30000);\n")))}s.isMDXComponent=!0},5680(e,t,n){n.d(t,{xA:()=>m,yg:()=>g});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef(function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),u=p(n),g=r,y=u["".concat(l,".").concat(g)]||u[g]||s[g]||o;return n?a.createElement(y,i(i({ref:t},m),{},{components:n})):a.createElement(y,i({ref:t},m))});function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);